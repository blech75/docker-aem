<VirtualHost *:80>

	ServerName localhost
	ServerAlias aem.dev
	ServerAdmin root@localhost

	# where the dispatcher stores its files (see dispather.any)
	DocumentRoot /var/www/dispatcher-publish

	<Directory /var/www/dispatcher-publish>

		<IfModule disp_apache2.c>
			ModMimeUsePathInfo On
			# enable dispatcher for ALL request. if this is too restrictive,
			# move it to another location
			SetHandler dispatcher-handler
		</IfModule>

		Order allow,deny
		Allow from all

	</Directory>

	# LogLevel info rewrite:trace4
	LogLevel info

	# use /dev/stdout instead of log files so logs available via 'docker logs'
	#
	#ErrorLog ${APACHE_LOG_DIR}/dispatcher.error.log
	#CustomLog ${APACHE_LOG_DIR}/dispatcher.access.log combined

	ErrorLog /dev/stdout

	# FIXME: add host to log format so we can differentiate between vhosts
	CustomLog /dev/stdout combined

</VirtualHost>
